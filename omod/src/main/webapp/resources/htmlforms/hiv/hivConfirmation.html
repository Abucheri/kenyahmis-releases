<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.
-->
<htmlform>

    <script type="text/javascript">
        var confirmatoryTestSelected = function() {
            var val = jq(this).val();
            if (val == 1066){
                jq('#confirmatory-hiv-result select').prop('disabled', true);
                jq('#confirmatory-test-date input').prop("disabled",true);
            }else {
                jq('#confirmatory-hiv-result select').prop('disabled', false);
                jq('#confirmatory-test-date input').prop("disabled",true);
            }

        }
        var confirmatoryResultSelected = function() {
            var confirmatoryResult = getField("confirmatory-hiv-result.value").val();
            if (confirmatoryResult == 703){
                jq('#confirmatory-test-date input').prop("disabled",false);
            }else {
                jq('#confirmatory-test-date input').prop("disabled",true);
            }

        }
        jQuery(function () {
            jq('#confirmatory-test :input[type=radio]').change(confirmatoryTestSelected);
            jq("#confirmatory-hiv-result select").change(confirmatoryResultSelected);
            jq('#confirmatory-hiv-result select').prop('disabled', true);
            jq('#confirmatory-test-date input').prop("disabled",true);
        });
    </script>

    <div class="ke-form-header">
        <table style="width: 100%">
            <tr>
                <td align="left">Date:
                    <encounterDate id="encounter-date" showTime="true"/>
                </td>
                <td align="right">Location:
                    <encounterLocation default="GlobalProperty:kenyaemr.defaultLocation" type="autocomplete"/>
                </td>
            </tr>
        </table>
    </div>

    <div class="ke-form-content">


        <fieldset>
            <legend>HIV Confirmatory Test Details</legend>
            <table>
                <tr>
                    <td>Patient has done HIV Reconfirmatory Test? &#160;&#160;&#160;&#160;</td>
                    <td>
                        <obs id="confirmatory-test" conceptId="159427AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="radio" answerLabels="Yes,No"/>
                    </td>
                </tr>
            </table>
            <hr/>
             <br/>
            <table>
                <tr>
                    <td>Reconfirmatory Test Result :&#160;&#160;&#160;&#160;</td>
                    <td>
                        <obs id="confirmatory-hiv-result" conceptId="159427AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="703AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,664AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1138AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="dropdown" answerLabels="Positive,Negative,Indeterminate"/>
                    </td>
                </tr>
            </table>
            <br/>
            <table>
                <tr>
                    <td>Reconfirmatory Test Date : &#160;&#160;&#160;&#160;&#160; </td>
                    <td>
                        <obs id="confirmatory-test-date" conceptId="164400AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" allowFutureDates="false" />
                    </td>
                </tr>
            </table>
        </fieldset>
    </div>

    <div class="ke-form-footer">
        <submit/>
    </div>

</htmlform>