<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.

-->
<htmlform>

    <script>

        function disableFields() {
            var table = document.getElementById("table");
            for (var i = 0, row; row = table.rows[i]; i++) {
                var baselineHivStatus = $(row).find('.baseline-hiv-status select').val();

                if (baselineHivStatus == 664) {     //negative
                    $(row).find('.in-care select').attr('disabled', true);
                    $(row).find('.ccc-no input').attr('disabled', true);
                    $(row).find('.referring-facility input').attr('disabled', true);
                    $(row).find('.next-hivtest-date input').attr('disabled', false);
                    $(row).find('.hiv-status').attr('disabled', false);
                }
                if (baselineHivStatus == 703)  {                     //positive
//                       $(row).find('.in-care select').val('');
//                       $(row).find('.ccc-no input').val('');
                    $(row).find('.in-care select').attr('disabled', false);
                    $(row).find('.ccc-no input').attr('disabled', false);
                    $(row).find('.referring-facility input').attr('disabled', false);
                    $(row).find('.next-hivtest-date input').attr('disabled', true);
                    $(row).find('.hiv-result select').attr('disabled', true);
                }
            }
        }


        $(document).ready(function () {

            disableFields();

            $(".hiv-result select").change(function () {
                var row = $(this).parent().parent().parent();
                var baseline = $(".baseline-hiv-status :selected").text();
               // console.log("Baseline " + baseline);
                if (this.value == 664 &amp;&amp; baseline !='Positive') {    //negative
                    $(row).find('.in-care select').attr('disabled', true);
                    $(row).find('.ccc-no input').attr('disabled', true);
                    $(row).find('.referring-facility input').attr('disabled',true);
                    $(row).find('.next-hivtest-date input').attr('disabled', false);
                    $(row).find('.hiv-result select').attr('disabled', false);
                    //Clearing fields
                    $(row).find('.referring-facility input').val('');
                    $(row).find('.ccc-no input').val('');

                } else {                     //positive

                    $(row).find('.in-care select').attr('disabled', false);
                    $(row).find('.ccc-no input').attr('disabled', false);
                    $(row).find('.referring-facility input').attr('disabled', false);
                    $(row).find('.next-hivtest-date input').attr('disabled', true);
                    $(row).find('.hiv-status select').attr('disabled', true);
                    //Clearing fields
                    $(row).find('.hiv-result input').val('');
                    $(row).find('.next-hivtest-date input').val('');
                }
            });

            $(".baseline-hiv-status  select").change(function () {
                var row = $(this).parent().parent().parent();

                if (this.value == 664) {    //negative
                    $(row).find('.in-care select').attr('disabled', true);
                    $(row).find('.ccc-no input').attr('disabled', true);
                    $(row).find('.referring-facility input').attr('disabled', true);
                    $(row).find('.next-hivtest-date input').attr('disabled', false);
                    $(row).find('.hiv-result select').attr('disabled', false);
                    //Clearing fields
                    $(row).find('.referring-facility input').val('');
                    $(row).find('.ccc-no input').val('');

                }
                if(this.value == 703) {                     //positive
                    $(row).find('.in-care select').attr('disabled', false);
                    $(row).find('.ccc-no input').attr('disabled', false);
                    $(row).find('.referring-facility input').attr('disabled', false);
                    $(row).find('.next-hivtest-date input').attr('disabled', true);
                    $(row).find('.hiv-result select').attr('disabled', true);
                    //Clearing fields
                    $(row).find('.hiv-result input').val('');
                    $(row).find('.next-hivtest-date input').val('');

                }
            });

        });
    </script>

    <!-- Encounter date, provider and location are not relevant for CE forms -->
    <div style="display:none">
        <encounterDate id="encounter-date" showTime="true" />
        <encounterProvider default="ae01b8ff-a4cc-4012-bcf7-72359e852e14"/>
        <encounterLocation default="GlobalProperty:kenyaemr.defaultLocation"/>
    </div>

    <div class="ke-form-content">
        <!-- Population Type  -->
        <fieldset>
            <legend>Population Type</legend>
            <table id="key-population">
                <tr>
                    <td>
                        <obs conceptId="160581AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="105AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerLabel="People who inject drugs" style="checkbox" /><br/>
                        <includeIf velocityTest="$patient.gender == 'M'">
                            <obs conceptId="160581AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="160578AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                 answerLabel="Men who have sex with men" style="checkbox" /><br/>
                        </includeIf>
                        <includeIf velocityTest="$patient.gender == 'F'">
                            <obs conceptId="160581AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="160579AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                 answerLabel="Female sex Worker" style="checkbox" id="female-sex-worker" /><br/>
                        </includeIf>
                    </td>
                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend>HIV Test History</legend>
            <table id="tbl-ever-tested">
                <tr>
                    <td>
                        Patient ever been tested for HIV? &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                        <obs class="ever-tested" conceptId="164401AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerLabel="Yes,No"
                             style="radio"
                             id="ever-on-ipt" />
                        <br/>
                    </td>
                    <td> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Duration since laste test :
                        &#160;&#160;&#160;&#160;&#160;
                        <obs class="retest-duration" conceptId="159813AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /> Months

                    </td>

                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend>Disability</legend>
            <table id="tbl-disability">
                <tr>
                    <td>
                        Patient has any disability? &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                        <obs class="ever-tested" conceptId="162558AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerLabel="Yes,No"
                             style="radio"
                             id="ever-on-ipt" />
                        <br/>
                    </td>
                    <td>     &#160;&#160;&#160;&#160;&#160;  Please indicated the type of disability :
                        <obs class="disability" conceptId="162558AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="1175AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,120291AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,147215AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,151342AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,164538AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="dropdown" answerLabels="Not Applicable,Deaf,Blind,Mentally Challenged,Physically Challenged,Other"/>
                    </td>
                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend>Consent</legend>
            <table id="tbl-consent">
                <tr>
                    <td>Patient has informed consent &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                        <obs class="consent" conceptId="1710AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="yes_no" />
                    </td>
                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend>Couple Testing</legend>
            <table id="tbl-couple-testing">
                <tr>
                    <td>Client tested as ? &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                        <obs class="couple-testing" conceptId="161557AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="dropdown" answerLabels="Individual,Couple"/>
                    </td>
                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend>HTS Strategy</legend>
            <table id="tbl-hts-strategy">
                <tr>
                    <td>Indicate HTS strategy used: &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                        <obs class="hts-strategy"
                             conceptId="160540AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="164163AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,161557AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160539AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,163121AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,159938AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,159939AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerLabels="Patient Initiated Testing,Non Patient Initiated Testing,Integrated VCT Center,Stand Alone VCT Center,Home Based Testing,Mobile Outreach HTS,Other"
                        />
                    </td>
                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend>HIV Tests</legend>
            <table id="tbl-hiv-test">
                <tr>
                    <td>HIV Test 1 Results:
                        <obs class="hiv-test1-result" conceptId="1040AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="703AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,664AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,163611AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="dropdown" answerLabels="Positive,Negive,Invalid"/>
                    </td>
                    <td>&#160;&#160;&#160;&#160; Kit Name
                        <!--<obs class="kit-name"-->
                        <!--conceptId="1040AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"-->
                        <!--answerConceptId="162401AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels=" "-->
                        <!--/>-->
                        <input type="text" name="kit-name" />
                    </td>
                    <td>&#160;&#160;&#160;&#160;Lot Number
                        <!--<obs class="lot-number"-->
                        <!--conceptId="1040AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"-->
                        <!--answerConceptId="162398AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"-->
                        <!--/>-->
                        <input type="text" name="lot-number" />
                    </td>
                    <td>&#160;&#160;&#160;&#160;Expiry Date
                        <obs class="expiry-date" conceptId="162502AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                        />
                    </td>
                </tr>
                <tr>
                    <td>HIV Test 2 Results:
                        <obs class="hiv-test2-result" conceptId="1326AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="703AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,664AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,163611AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1175AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="dropdown" answerLabels="Positive,Negive,Invalid,N/A"/>
                    </td>
                    <td>&#160;&#160;&#160;&#160; Kit Name
                        <!--<obs class="kit-name"-->
                        <!--conceptId="1040AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"-->
                        <!--answerConceptId="162401AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels=" "-->
                        <!--/>-->
                        <input type="text" name="kit-name" />
                    </td>
                    <td>&#160;&#160;&#160;&#160;Lot Number
                        <!--<obs class="lot-number"-->
                        <!--conceptId="1040AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"-->
                        <!--answerConceptId="162398AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"-->
                        <!--/>-->
                        <input type="text" name="lot-number" />
                    </td>
                    <td>&#160;&#160;&#160;&#160;Expiry Date
                        <obs class="expiry-date" conceptId="162502AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                        />
                    </td>
                </tr>
                <tr>
                    <td>Final Results:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                        <obs class="hiv-final-result" conceptId="159427AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="703AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,664AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1138AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="dropdown" answerLabels="Positive,Negive,Inconclusive"/>
                    </td>
                    <td>&#160;&#160;&#160;&#160;Results given to client?&#160;&#160;&#160;&#160;
                        <obs class="result-given" conceptId="164401AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="dropdown" answerLabels="YES,NO"/>
                    </td>

                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend>Discordance</legend>
            <table id="tbl-discordant">
                <tr>
                    <td>Couple is discordant: &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                        <obs class="couple-discordant" conceptId="6096AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1175AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="radio" answerLabels="YES,NO,N/A"/>
                    </td>
                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend>TB Screening</legend>
            <table id="tbl-tb-screening">
                <tr>
                    <td>Tb Screening results: &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                        <obs id="tb-screening" conceptId="1659AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"  answerConceptIds="1660AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,142177AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1662AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,160737AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="radio" answerLabels="No TB Signs,Presumed TB,TB Confirmed,Not Done" />
                    </td>
                </tr>
            </table>
        </fieldset>
        <fieldset>
        <legend>Care Status</legend>
        <table id="tbl-care-status">
            <tr>
                <td>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;In care: &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                    <obs class="in-care" conceptId="159811AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                         answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1175AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                         style="radio" answerLabels="YES,NO,N/A"/>
                </td>
            </tr>
        </table>
    </fieldset>
        <fieldset>
            <legend>HIV Self Test </legend>
            <table id="tbl-hiv-selftest">
                <tr>
                    <td>Has the client done HIV self test in the last 12 months? &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                        <obs class="hb-self-test" conceptId="1492AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="yes_no" />
                    </td>
                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend>HTS provider </legend>
            <table id="tbl-hts-provider">
                <tr>
                    <td>Indicate HTS provider name: &#160;&#160;&#160;&#160;&#160;&#160;
                        <obs class="provider-name" conceptId="1473AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                        />
                    </td>
                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend>Remarks </legend>
            <table id="tbl-remarks">
                <tr>
                    <td> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Remarks: &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                        <obs class="remarks" conceptId="163761AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                        />
                    </td>
                </tr>
            </table>
        </fieldset>
    </div>
    <div class="ke-form-footer">
        <submit/>
    </div>

</htmlform>